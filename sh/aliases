os=`uname -s | tr "[:upper:]" "[:lower:]"`
if [ -d "$HOME/bin/dotfiles/sh/$os" -a -f "$HOME/bin/dotfiles/sh/$os/aliases" ]; then
  source $HOME/bin/dotfiles/sh/$os/aliases
fi

# System-wide aliases
alias c='clear'
alias x='exit'
alias b='cd -'  # back
alias u='cd ..' # up
function p() { cd $HOME/p/$1 } # p = projects. popular folder.
alias psa='ps wwwax'

alias e='mvim'

alias sd='sudo'
alias du1='du -h -d 1'
function pd () { if [ $# -gt 0 ]; then pushd $1 >/dev/null; else pushd $PWD >/dev/null; fi }
alias bd='popd >/dev/null'
alias my='mysql'
alias myd='mysqldump'
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'

# executes the first argument on each of the arguments that follow
function each () {
  for f in "${@:2:$#}" ; do eval $1 \"$f\" ; done
}

alias unrarall='each "unrar e"'

# git
alias gst='git status'
function gl () {
  git pull $@ && git submodule init && git submodule update
}
alias gp='git push'
function gpb () { git push $@ >$HOME/.git-deploys/`ruby -e "puts Time.now.to_f"`.log 2>&1 & }
alias gg='git log --stat --abbrev-commit'
function gd () {
  git diff $@ | mvim -
}
alias gc='git commit -v'
alias gca='git commit -v -a'
alias gb='git branch --color'
alias gba='git branch -a --color'
alias gco='git checkout'
alias gf='git fetch'
alias grb='git rebase'
alias ga='git add'

alias gemset='rvm gemset'
alias gs='rvm gemset'
alias gsu='rvm gemset use'

# rails
# we pushd/popd so you can execute these from anywhere and your working directory
# is preserved.
function sc () { pd; rr && script/console $@; bd; }
function ss () { pd; rr && script/server thin $@; bd; }
function db () { pd; rr && script/dbconsole $@; bd; }
function mi () { pd; rr && rake db:migrate $@; bd; }
function ra () { pd; rr && rake $@; bd; }

# "useful" at the end of a paste
alias happyface='echo :\)'
alias sadface='echo :\('
